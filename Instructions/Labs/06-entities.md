---
lab:
  title: エンティティの使用
  module: Work with entities and variables in Microsoft Copilot Studio
---

# エンティティの使用

## シナリオ

この演習では、次のことを行います。

- エンティティの作成と使用

この演習の所要時間は約 **15** 分です。

## 前提条件

- **ラボ: ノードの管理**を完了している必要があります

## 詳細な手順

## 演習 1 - エンティティを作成する

Microsoft Copilot Studio では、エンティティを使用してユーザーの意図を理解します。 よく使用される情報用に、事前構築済みのエンティティが多数含まれています。 特定の目的に合わせて、カスタム エンティティを作成できます。

### タスク 1.1 - 事前構築済みのエンティティを表示する

1. Microsoft Copilot Studio ポータル `https://copilotstudio.microsoft.com` に移動し、適切な環境にあることを確認します。

1. 左側のナビゲーション ウィンドウから **[エージェント]** を選択します。

1. 前のラボで作成した **[不動産予約サービス]** エージェントを選択します。

1. 画面の右上にある **[設定]** を選択します。

1. **[エンティティ]** タブを選択します。

    ![[エンティティ] タブのスクリーンショット。](../media/system-entities.png)

### タスク 1.2 - プロパティ型エンティティを作成する

1. **[+ エンティティを追加する]** を選択し、**[+ 新しいエンティティ]** を選択します。

    ![新しいエンティティのメソッドを選択している場面を示すスクリーンショット。](../media/add-an-entity.png)

1. **[閉じているリスト]** タイルを選択します。

1. **[名前]** フィールドに「**`Property Type`**」と入力します。

1. **[項目の入力]** フィールドに「**`Apartment`**」と入力し、**[追加]** を選択します。

1. **[項目の入力]** フィールドに「**`Condominium`**」と入力し、**[追加]** を選択します。

1. **[項目の入力]** フィールドに「**`Duplex`**」と入力し、**[追加]** を選択します。

1. **[項目の入力]** フィールドに「**`House`**」と入力し、**[追加]** を選択します。

1. **Apartment** の **[+ シノニム]** を選択し、「**`Flat`**」と入力して **[+]** アイコンを選択し、**[完了]** を選択します。

1. **Condominium** の **[+ シノニム]** を選択し、「**`Townhouse`**」と入力して **[+]** アイコンを選択し、**[完了]** を選択します。

1. **House** の **[+ シノニム]** を選択し、「**`Single-family home`**」と入力して **[+]** アイコンを選択し、**[完了]** を選択します。

1. **[スマート マッチング]** を有効にします。

    ![新しいエンティティのスクリーンショット。](../media/add-list-entity.png)

1. **[保存]** を選択します。

1. **[閉じる]** を選択します。

### タスク 1.3 - ベッドルーム エンティティの数を作成する

1. **[+ エンティティを追加する]** を選択し、**[+ 新しいエンティティ]** を選択します。

1. **[正規表現 (Regex)]** タイルを選択します。

1. **[名前]** フィールドに「**`Number of Bedrooms`**」と入力します。

1. **[パターン]** フィールドに「**`[1-5]`**」と入力します。

1. **[保存]** を選択します。

1. **[閉じる]** を選択します。

1. 右上にある **[X]** アイコンを選択して [設定] を閉じ、エージェントに戻ります。

## 演習 2 - エンティティを使用してエージェントを改善する

会話フローでエンティティを使用して、エージェントを改善します。

### タスク 2.1 - エンティティを使用する

1. **[トピック]** タブを選択します。

1. **[不動産の内見の予約]** トピックを選択します。

1. **[条件]** ノードとプロパティ **[質問]** ノードの間の **[+]** アイコンを選択し、**[質問する]** を選択します。

1. **"メッセージを送信する"** フィールドに、次のテキストを入力します。

    `どの種類の物件をご覧になりたいですか？`

1. **[特定]** には、**[Property Type]** を選択します。

1. **[ユーザーのオプションの選択]** を選択し、4 つの値すべてに対して **[表示]** オプションをオンにします。

1. **[ユーザーの応答を名前を付けて保存]** で変数を選択し、**[変数名]** に「**`PropertyType`**」を入力します。

    ![新しいエンティティのスクリーンショット。](../media/question-node-entity.png)

1. 新しい **[質問]** ノードの下にある **[+]** アイコンを選択し、**[質問する]** を選択します。

1. **"メッセージを送信する"** フィールドに、次のテキストを入力します。

    `寝室はいくつ必要ですか？`

1. **[特定]** には、**[Number of Bedrooms]** を選択します。

1. **[ユーザーの応答を名前を付けて保存]** で変数を選択し、**[変数名]** に「**`NumberofBedrooms`**」を入力します。

1. **[保存]** を選択します。
